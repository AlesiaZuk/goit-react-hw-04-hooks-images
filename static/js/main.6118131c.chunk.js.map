{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","api/img-api.js","components/Loader/Loader.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","App.js","index.js","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchQuery","setSearchQuery","e","preventDefault","type","value","onChange","target","toLowerCase","className","s","search_form","placeholder","required","search_button","fetchImage","page","fetch","then","response","json","LoaderSpinner","color","height","width","timeout","ImageGalleryItem","img","toggleModal","onImgClick","handleClick","nodeName","largeImageURL","dataset","source","alt","map","item","gallery_item","href","gallery_link","onClick","src","webformatURL","tags","gallery_image","id","memo","Button","handelClick","button","Status","ImageGallery","setImg","showButton","setShowButton","status","setStatus","fetchGallery","useCallback","data","hits","length","prevImg","image","totalHits","showLoaderButton","useEffect","gallery_title","gallery_container","Loader","gallery_list","button_container","modalRoot","document","querySelector","Modal","onClose","children","handleKeyDown","code","window","addEventListener","removeEventListener","createPortal","modal_backdrop","currentTarget","modal_content","container","search","searchContainer","App","imgModal","setImgModal","showModal","setShowModal","setPage","trim","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6118131c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"search_form\":\"Searchbar_search_form__1R3LV\",\"search_button\":\"Searchbar_search_button__32d7i\",\"search\":\"Searchbar_search__33C9i\",\"search_container\":\"Searchbar_search_container__1Yjvd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3BEgg\",\"buttonIsHidden\":\"Button_buttonIsHidden__u1HIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_title\":\"ImageGallery_gallery_title__10svP\",\"gallery_list\":\"ImageGallery_gallery_list__3pkXg\",\"gallery_container\":\"ImageGallery_gallery_container__2Ayh1\",\"button_container\":\"ImageGallery_button_container__any_j\"};","import { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './Searchbar.module.css';\n\nfunction Searchbar({ onSubmit }) {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onSubmit(searchQuery);\n    setSearchQuery('');\n  }\n\n  function handelChange(e) {\n    setSearchQuery(e.target.value.toLowerCase());\n  }\n\n  return (\n    <>\n      <h1>Search images</h1>\n      <form onSubmit={handleSubmit}>\n        <label>\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={handelChange}\n            className={s.search_form}\n            placeholder=\"Search images...\"\n            required\n          />\n        </label>\n        <button type=\"submit\" className={s.search_button}>\n          Search\n        </button>\n      </form>\n    </>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","const API_KEY = '23521874-546d3070950852676c2506258';\nconst BASE_URL = 'https://pixabay.com/api';\nconst per_page = 12;\n\nfunction fetchImage(searchQuery, page) {\n  return fetch(\n    `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=${per_page}&key=${API_KEY}`,\n  ).then(response => {\n    return response.json();\n  });\n}\n\nexport default fetchImage;\n","import Loader from 'react-loader-spinner';\n\nfunction LoaderSpinner() {\n  return (\n    <Loader\n      type=\"Circles\"\n      color=\"#b89393\"\n      height={100}\n      width={100}\n      timeout={3000}\n    />\n  );\n}\nexport default LoaderSpinner;\n","import { memo } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ img, toggleModal, onImgClick }) {\n  function handleClick(e) {\n    e.preventDefault();\n\n    if (e.target.nodeName === 'IMG') {\n      const img = {};\n      img.largeImageURL = e.target.dataset.source;\n      img.alt = e.target.alt;\n\n      toggleModal();\n      onImgClick(img);\n    }\n  }\n\n  return img.map(item => {\n    return (\n      <li className={s.gallery_item} key={item.id}>\n        <div>\n          <a\n            href={item.largeImageURL}\n            className={s.gallery_link}\n            onClick={handleClick}\n          >\n            <img\n              src={item.webformatURL}\n              alt={item.tags}\n              width=\"370px\"\n              height=\"250px\"\n              className={s.gallery_image}\n              data-source={item.largeImageURL}\n            />\n          </a>\n        </div>\n      </li>\n    );\n  });\n}\n\nImageGalleryItem.propTypes = {\n  img: PropTypes.array.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  onImgClick: PropTypes.func.isRequired,\n};\n\nexport default memo(ImageGalleryItem);\n","import PropTypes from 'prop-types';\n\nimport s from './Button.module.css';\n\nfunction Button({ handelClick }) {\n  return (\n    <button type=\"button\" onClick={handelClick} className={s.button}>\n      Load more...\n    </button>\n  );\n}\n\nButton.propTypes = {\n  handelClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport fetchImage from '../../api/img-api.js';\nimport LoaderSpinner from '../Loader/Loader.js';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem.js';\nimport Button from '../Button/Button';\n\nimport s from './ImageGallery.module.css';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nfunction ImageGallery({\n  searchQuery,\n  toggleModal,\n  onImgClick,\n  page,\n  handelClick,\n}) {\n  const [img, setImg] = useState([]);\n  const [showButton, setShowButton] = useState(false);\n  const [status, setStatus] = useState(Status.IDLE);\n\n  const fetchGallery = useCallback(() => {\n    if (!searchQuery) {\n      return;\n    }\n    fetchImage(searchQuery, page).then(data => {\n      if (data.hits.length > 0) {\n        setImg(prevImg => {\n          return [\n            ...prevImg,\n            ...data.hits.map(item => {\n              const image = {};\n              image.id = item.webformatURL;\n              image.largeImageURL = item.largeImageURL;\n              image.webformatURL = item.webformatURL;\n              image.tags = item.tags;\n              return image;\n            }),\n          ];\n        });\n\n        setStatus(Status.RESOLVED);\n\n        showLoaderButton(data);\n      } else {\n        setStatus(Status.REJECTED);\n      }\n    });\n  }, [searchQuery, page]);\n\n  useEffect(() => {\n    setImg([]);\n    setStatus(Status.IDLE);\n  }, [searchQuery]);\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n    setStatus(Status.PENDING);\n\n    fetchGallery();\n  }, [fetchGallery, searchQuery]);\n\n  function showLoaderButton(data) {\n    if (data.totalHits > 12 && data.hits.length === 12) {\n      setShowButton(true);\n    } else {\n      setShowButton(false);\n    }\n  }\n\n  if (status === 'idle') {\n    return <h2 className={s.gallery_title}>Enter a keyword...</h2>;\n  }\n\n  if (status === 'pending') {\n    return (\n      <div className={s.gallery_container}>\n        <LoaderSpinner></LoaderSpinner>;\n      </div>\n    );\n  }\n\n  if (status === 'rejected') {\n    return (\n      <h2\n        className={s.gallery_title}\n      >{`No image with keyword ${searchQuery}`}</h2>\n    );\n  }\n\n  if (status === 'resolved') {\n    return (\n      <>\n        <section>\n          <ul className={s.gallery_list}>\n            <ImageGalleryItem\n              img={img}\n              toggleModal={toggleModal}\n              onImgClick={onImgClick}\n            ></ImageGalleryItem>\n          </ul>\n        </section>\n\n        {showButton && (\n          <div className={s.button_container}>\n            <Button handelClick={handelClick}></Button>\n          </div>\n        )}\n      </>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  searchQuery: PropTypes.string.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  onImgClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nfunction Modal({ onClose, children }) {\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  });\n\n  function handleKeyDown(e) {\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  }\n\n  function handleBackdropClick(e) {\n    if (e.currentTarget === e.target) {\n      onClose();\n    }\n  }\n\n  return createPortal(\n    <div className={s.modal_backdrop} onClick={handleBackdropClick}>\n      <button type=\"button\" onClick={onClose} className={s.button}>\n        X\n      </button>\n      <div className={s.modal_content}>{children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import { useState } from 'react';\n\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Modal from './components/Modal/Modal';\n\nconst container = ['container'];\nconst search = ['search'];\nconst searchContainer = ['search_container'];\nconst image = ['image'];\n\nfunction App() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [imgModal, setImgModal] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [page, setPage] = useState(1);\n\n  function formSubmit(searchQuery) {\n    setSearchQuery(searchQuery.trim());\n    setPage(1);\n  }\n\n  function toggleModal() {\n    setShowModal(showModal => !showModal);\n  }\n\n  function ImgClick(imgModal) {\n    setImgModal(imgModal);\n  }\n\n  function changePage() {\n    setPage(page + 1);\n  }\n\n  return (\n    <>\n      <main>\n        <div className={container}>\n          <section className={search}>\n            <div className={searchContainer}>\n              <Searchbar onSubmit={formSubmit}></Searchbar>\n            </div>\n          </section>\n          <ImageGallery\n            searchQuery={searchQuery}\n            toggleModal={toggleModal}\n            onImgClick={ImgClick}\n            page={page}\n            handelClick={changePage}\n          ></ImageGallery>\n        </div>\n      </main>\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img\n            src={imgModal.largeImageURL}\n            alt={imgModal.alt}\n            className={image}\n          />\n        </Modal>\n      )}\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_item\":\"ImageGalleryItem_gallery_item__2xZcQ\",\"gallery_image\":\"ImageGalleryItem_gallery_image__2-mzz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_backdrop\":\"Modal_modal_backdrop__KiPLi\",\"modal_content\":\"Modal_modal_content__1vwmU\",\"button\":\"Modal_button__37K_N\"};"],"sourceRoot":""}