{"version":3,"sources":["components/Modal/Modal.module.css","components/Searchbar/Searchbar.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","api/img-api.js","components/Loader/Loader.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","App.js","index.js","components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleSubmit","e","preventDefault","props","onSubmit","setState","handelChange","target","value","toLowerCase","this","type","onChange","className","s","search_form","placeholder","required","search_button","Component","fetchImage","page","fetch","then","response","json","LoaderSpinner","color","height","width","timeout","ImageGalleryItem","handleClick","toggleModal","onImgClick","nodeName","img","largeImageURL","dataset","source","alt","map","item","gallery_item","href","gallery_link","onClick","src","webformatURL","tags","gallery_image","id","Button","handelClick","button","Status","ImageGallery","error","showButton","status","pageIncrement","fetchGallery","data","hits","length","image","showLoaderButton","totalHits","prevProps","prevState","prevName","nextName","gallery_title","gallery_container","Loader","gallery_list","button_container","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","modal_backdrop","modal_content","children","container","search","searchContainer","App","imgModal","showModal","FormSubmit","ImgClick","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4b9d2d20.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_backdrop\":\"Modal_modal_backdrop__KiPLi\",\"modal_content\":\"Modal_modal_content__1vwmU\",\"button\":\"Modal_button__37K_N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search_form\":\"Searchbar_search_form__1R3LV\",\"search_button\":\"Searchbar_search_button__32d7i\",\"search\":\"Searchbar_search__33C9i\",\"search_container\":\"Searchbar_search_container__1Yjvd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3BEgg\",\"buttonIsHidden\":\"Button_buttonIsHidden__u1HIq\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleSubmit = e => {\n    const { searchQuery } = this.state;\n\n    e.preventDefault();\n\n    this.props.onSubmit(searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  handelChange = e => {\n    this.setState({ searchQuery: e.target.value.toLowerCase() });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <>\n        <h1>Search images</h1>\n        <form onSubmit={this.handleSubmit}>\n          <label>\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={this.handelChange}\n              className={s.search_form}\n              placeholder=\"Search images...\"\n              required\n            />\n          </label>\n          <button type=\"submit\" className={s.search_button}>\n            Search\n          </button>\n        </form>\n      </>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","const API_KEY = '23521874-546d3070950852676c2506258';\nconst BASE_URL = 'https://pixabay.com/api';\nconst per_page = 12;\n\nfunction fetchImage(searchQuery, page) {\n  return fetch(\n    `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=${per_page}&key=${API_KEY}`,\n  ).then(response => {\n    return response.json();\n  });\n}\n\nexport default fetchImage;\n","import Loader from 'react-loader-spinner';\n\nfunction LoaderSpinner() {\n  return (\n    <Loader\n      type=\"Circles\"\n      color=\"#b89393\"\n      height={100}\n      width={100}\n      timeout={3000}\n    />\n  );\n}\nexport default LoaderSpinner;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nclass ImageGalleryItem extends Component {\n  handleClick = e => {\n    const { toggleModal, onImgClick } = this.props;\n\n    e.preventDefault();\n\n    if (e.target.nodeName === 'IMG') {\n      const img = {};\n      img.largeImageURL = e.target.dataset.source;\n      img.alt = e.target.alt;\n\n      toggleModal();\n      onImgClick(img);\n    }\n  };\n\n  render() {\n    const { img } = this.props;\n\n    return img.map(item => {\n      return (\n        <li className={s.gallery_item} key={item.id}>\n          <div>\n            <a\n              href={item.largeImageURL}\n              className={s.gallery_link}\n              onClick={this.handleClick}\n            >\n              <img\n                src={item.webformatURL}\n                alt={item.tags}\n                width=\"370px\"\n                height=\"250px\"\n                className={s.gallery_image}\n                data-source={item.largeImageURL}\n              />\n            </a>\n          </div>\n        </li>\n      );\n    });\n  }\n}\n\nImageGalleryItem.propTypes = {\n  img: PropTypes.array.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  onImgClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\n\nimport s from './Button.module.css';\n\nfunction Button({ handelClick }) {\n  return (\n    <button type=\"button\" onClick={handelClick} className={s.button}>\n      Load more...\n    </button>\n  );\n}\n\nButton.propTypes = {\n  handelClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport fetchImage from '../../api/img-api.js';\nimport LoaderSpinner from '../Loader/Loader.js';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem.js';\nimport Button from '../Button/Button';\n\nimport s from './ImageGallery.module.css';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass ImageGallery extends Component {\n  state = {\n    img: [],\n    page: 2,\n    error: null,\n    showButton: false,\n    status: Status.IDLE,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { page } = this.state;\n    const prevName = prevProps.searchQuery;\n    const nextName = this.props.searchQuery;\n\n    if (prevName !== nextName) {\n      this.setState({\n        img: [],\n        page: 2,\n        status: Status.PENDING,\n      });\n    }\n    if (prevName !== nextName || prevState.page !== page) {\n      this.fetchGallery(nextName, page);\n    }\n  }\n\n  handelClick = () => {\n    this.pageIncrement();\n\n    // this.fetchGallery(this.props.searchQuery, page);\n  };\n\n  fetchGallery = (searchQuery, page) => {\n    fetchImage(searchQuery, page).then(data => {\n      if (data.hits.length > 0) {\n        this.setState({\n          img: [\n            ...this.state.img,\n            ...data.hits.map(item => {\n              const image = {};\n              image.id = item.id;\n              image.largeImageURL = item.largeImageURL;\n              image.webformatURL = item.webformatURL;\n              image.tags = item.tags;\n              return image;\n            }),\n          ],\n          status: Status.RESOLVED,\n        });\n\n        this.showLoaderButton(data);\n      } else {\n        this.setState({\n          error: `No image with keyword ${searchQuery}`,\n          status: Status.REJECTED,\n        });\n      }\n    });\n  };\n\n  showLoaderButton = data => {\n    if (data.totalHits > 12 && data.hits.length === 12) {\n      this.showButton(true);\n    } else {\n      this.showButton(false);\n    }\n  };\n\n  showButton = showButton => {\n    this.setState({ showButton });\n  };\n\n  pageIncrement = () => {\n    const { page } = this.state;\n    this.setState({ page: page + 1 });\n  };\n\n  render() {\n    const { toggleModal, onImgClick } = this.props;\n    const { img, error, status, showButton } = this.state;\n\n    if (status === 'idle') {\n      return <h2 className={s.gallery_title}>Enter a keyword...</h2>;\n    }\n\n    if (status === 'pending') {\n      return (\n        <div className={s.gallery_container}>\n          <LoaderSpinner></LoaderSpinner>;\n        </div>\n      );\n    }\n\n    if (status === 'rejected') {\n      return <h2 className={s.gallery_title}>{error}</h2>;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <section>\n            <ul className={s.gallery_list}>\n              <ImageGalleryItem\n                img={img}\n                toggleModal={toggleModal}\n                onImgClick={onImgClick}\n              ></ImageGalleryItem>\n            </ul>\n          </section>\n\n          {showButton && (\n            <div className={s.button_container}>\n              <Button handelClick={this.handelClick}></Button>\n            </div>\n          )}\n        </>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  searchQuery: PropTypes.string.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  onImgClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.modal_backdrop} onClick={this.handleBackdropClick}>\n        <button type=\"button\" onClick={this.props.onClose} className={s.button}>\n          X\n        </button>\n        <div className={s.modal_content}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import { Component } from 'react';\n\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Modal from './components/Modal/Modal';\n\nconst container = ['container'];\nconst search = ['search'];\nconst searchContainer = ['search_container'];\nconst image = ['image'];\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    imgModal: '',\n    showModal: false,\n  };\n\n  FormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  ImgClick = imgModal => {\n    this.setState({ imgModal });\n  };\n\n  render() {\n    const { searchQuery, imgModal, showModal } = this.state;\n\n    return (\n      <>\n        <main>\n          <div className={container}>\n            <section className={search}>\n              <div className={searchContainer}>\n                <Searchbar onSubmit={this.FormSubmit}></Searchbar>\n              </div>\n            </section>\n            <ImageGallery\n              searchQuery={searchQuery}\n              toggleModal={this.toggleModal}\n              onImgClick={this.ImgClick}\n            ></ImageGallery>\n          </div>\n        </main>\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img\n              src={imgModal.largeImageURL}\n              alt={imgModal.alt}\n              className={image}\n            />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_title\":\"ImageGallery_gallery_title__10svP\",\"gallery_list\":\"ImageGallery_gallery_list__3pkXg\",\"gallery_container\":\"ImageGallery_gallery_container__2Ayh1\",\"button_container\":\"ImageGallery_button_container__any_j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_item\":\"ImageGalleryItem_gallery_item__2xZcQ\",\"gallery_image\":\"ImageGalleryItem_gallery_image__2-mzz\"};"],"sourceRoot":""}